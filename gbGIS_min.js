function gbGIS_Proj_MercXZtoMercXZ(e,t,n){return n>t?e<<(n-t|0)|0:e>>>(t-n|0)|0}function gbGIS_Proj_GetNormalizedCoord(e,t){var n=e.y;var r=e.x;var i=1<<t;if(n<0||n>=i){return null}if(r<0||r>=i){r=(r%i+i)%i}return{x:r,y:n}}function gbGIS_Proj_GetNewPxExtentVectorForTXYZ_u32(e,t,n,r){var i=new Uint32Array(6);i[0]=e;i[1]=t;i[4]=r;i[5]=n;i[0]<<=8;i[1]<<=8;i[2]=256;i[2]=gbGIS_Proj_MercXZtoMercXZ(i[2],i[5],i[4])-1;i[3]=i[2];i[0]=gbGIS_Proj_MercXZtoMercXZ(i[0],i[5],i[4]);i[1]=gbGIS_Proj_MercXZtoMercXZ(i[1],i[5],i[4]);i[2]+=i[0];i[3]+=i[1];return i}function gbGIS_Proj_SetPxExtentVectorForTXYZ_u32(e,t,n,r,i){e[0]=t;e[1]=n;e[4]=i;e[5]=r;e[0]<<=8;e[1]<<=8;e[2]=256;e[2]=gbGIS_Proj_MercXZtoMercXZ(e[2],e[5],e[4])-1;e[3]=e[2];e[0]=gbGIS_Proj_MercXZtoMercXZ(e[0],e[5],e[4]);e[1]=gbGIS_Proj_MercXZtoMercXZ(e[1],e[5],e[4]);e[2]+=e[0];e[3]+=e[1]}function gbGIS_IsTileInExtent(e,t,n,r,i,s,o,u){var a=false;var f=e<<8|0;var l=t<<8|0;var c=f+255|0;var h=l+255|0;f=gbGIS_Proj_MercXZtoMercXZ(f,n,u);l=gbGIS_Proj_MercXZtoMercXZ(l,n,u);c=gbGIS_Proj_MercXZtoMercXZ(c,n,u);h=gbGIS_Proj_MercXZtoMercXZ(h,n,u);f=f>>>8|0;l=l>>>8|0;c=c>>>8|0;h=h>>>8|0;if((f>=r||c>=r)&&(f<=s||c<=s)&&(l>=i||h>=i)&&(l<=o||h<=o)){a=true}return a}function gbGIS_sve(e,t,n){var r=0;if(n%16==0){var i=t;var s=t+n;while(i<s){r+=e[i]+e[i+1]+e[i+2]+e[i+3]+e[i+4]+e[i+5]+e[i+6]+e[i+7]+e[i+8]+e[i+9]+e[i+10]+e[i+11]+e[i+12]+e[i+13]+e[i+14]+e[i+15];i+=16}}else{for(var i=t;i<t+n;i++){r+=e[i]}}return r}function gbGIS_vclr(e,t,n){if(n%16==0){var r=t;var i=t+n;while(r<i){e[r]=0;e[r+1]=0;e[r+2]=0;e[r+3]=0;e[r+4]=0;e[r+5]=0;e[r+6]=0;e[r+7]=0;e[r+8]=0;e[r+9]=0;e[r+10]=0;e[r+11]=0;e[r+12]=0;e[r+13]=0;e[r+14]=0;e[r+15]=0;r+=16}}else{for(var r=t;r<t+n;r++){e[r]=0}}}function gbGIS_vfill(e,t,n,r){if(r%16==0){var i=t;var s=t+r;while(i<s){e[i]=n;e[i+1]=n;e[i+2]=n;e[i+3]=n;e[i+4]=n;e[i+5]=n;e[i+6]=n;e[i+7]=n;e[i+8]=n;e[i+9]=n;e[i+10]=n;e[i+11]=n;e[i+12]=n;e[i+13]=n;e[i+14]=n;e[i+15]=n;i+=16}}else{for(var i=t;i<t+r;i++){e[i]=0}}}function gbGIS_vshr_n_u08(e,t,n,r){if(r%8==0){for(var i=0;i<r;i+=8){e[i]>>>=n;e[i+1]>>>=n;e[i+2]>>>=n;e[i+3]>>>=n;e[i+4]>>>=n;e[i+5]>>>=n;e[i+6]>>>=n;e[i+7]>>>=n}}else{for(var i=0;i<r;i++){e[i]>>>=n}}}function gbGIS_GetDataCount_08(e,t,n){var r=false;var i=0;if(n%8==0){var s=t;var o=t+n;while(s<o){i+=(e[s]&1)+(e[s+1]&1)+(e[s+2]&1)+(e[s+3]&1)+(e[s+4]&1)+(e[s+5]&1)+(e[s+6]&1)+(e[s+7]&1)+(e[s+8]&1)+(e[s+9]&1)+(e[s+10]&1)+(e[s+11]&1)+(e[s+12]&1)+(e[s+13]&1)+(e[s+14]&1)+(e[s+15]&1);s+=16}}else{for(var s=t;s<t+n;s++){i+=e[s]&1}}return i}function gbGIS_GetDataCount_16(e,t,n){var r=false;var i=0;if(n%8==0){var s=t;var o=t+n;while(s<o){i+=(e[s]&1)+(e[s+1]&1)+(e[s+2]&1)+(e[s+3]&1)+(e[s+4]&1)+(e[s+5]&1)+(e[s+6]&1)+(e[s+7]&1);s+=8}}else{for(var s=t;s<t+n;s++){i+=e[s]&1}}return i}function gbGIS_GetDataCount_32(e,t,n){var r=false;var i=0;if(n%4==0){var s=t;var o=t+n;while(s<o){i+=(e[s]&1)+(e[s+1]&1)+(e[s+2]&1)+(e[s+3]&1);s+=4}}else{for(var s=t;s<t+n;s++){i+=e[s]&1}}return i}function gbGIS_GetDataCount_64(e,t,n){var r=false;var i=0;if(n%2==0){var s=t;var o=t+n;while(s<o){i+=(e[s]&1)+(e[s+1]&1);s+=2}}else{for(var s=t;s<t+n;s++){i+=e[s]&1}}return i}function gbGIS_GetHasAnyData(e,t,n,r){var i=false;if(r%16==0){var s=t;var o=t+r;while(s<o){if(e[s]||e[s+1]||e[s+2]||e[s+3]||e[s+4]||e[s+5]||e[s+6]||e[s+7]||e[s+8]||e[s+9]||e[s+10]||e[s+11]||e[s+12]||e[s+13]||e[s+14]||e[s+15]){i=true;break}s+=16}}else{for(var s=t;s<t+r;s++){if(e[s]!=n){i=true;break}}}return i}function gbGIS_vcmprs(e,t,n,r,i){var s=r;for(var o=t;o<t+i;o++){if(e[o]!=0)n[s++]=e[o]}}function gbGIS_new_vcmprs_u08(e,t,n){var r=gbGIS_GetDataCount_08(e,t,n);var i=new Uint8Array(r);gbGIS_vcmprs(e,t,i,0,n);return i}function gbGIS_ivtovec(e,t,n){if(t.length%4==0){var r=0;var i=t.length;while(r<i){e[t[r]]=n[r];e[t[r+1]]=n[r+1];e[t[r+2]]=n[r+2];e[t[r+3]]=n[r+3];r+=4}}else{for(var r=0;r<t.length;r++){e[t[r]]=n[r]}}}function gbGIS_ivtonvec_u16(e,t,n){var r=new Uint16Array(n);gbGIS_ivtovec(r,e,t);return r}function gbGIS_svhtoi(e,t,n){return parseInt("0x"+e.substring(t,t+n))}function gbGIS_vhtoni_u16(e){var t=new Uint16Array(e.length>>>2);if(t.length%4==0){var n=0;var r=e.length;while(n<r){t[n]=gbGIS_svhtoi(e,n<<2,4);t[n+1]=gbGIS_svhtoi(e,n+1<<2,4);t[n+2]=gbGIS_svhtoi(e,n+2<<2,4);t[n+3]=gbGIS_svhtoi(e,n+3<<2,4);n+=4}}else{for(var n=0;n<t.length;n++){t[n]=gbGIS_svhtoi(e,n<<2,4)}}return t}function gbGIS_vhtoi_u08(e,t,n,r,i){if(i%4==0){var s=r;var o=t;var u=r+i;while(s<u){e[o]=gbGIS_svhtoi(n,s<<1,2);e[o+1]=gbGIS_svhtoi(n,s+1<<1,2);e[o+2]=gbGIS_svhtoi(n,s+2<<1,2);e[o+3]=gbGIS_svhtoi(n,s+3<<1,2);s+=4;o+=4}}else{for(var a=0;a<i;a++){e[a+t]=gbGIS_svhtoi(n,a+r<<1,2)}}}function gbGIS_vcopy(e,t,n,r,i){e.subarray(t,t+i).set(n.subarray(r,r+i))}function gbGIS_vcombinen_u08(e,t,n){var r=new Uint8Array(e.length+t.length+n);r.set(e);r.set(t,e.length);return r}function gbGIS_GetFlippedImageBuffer(e,t,n,r){var i=new Uint8Array(e.length);var s=t*r;var o=n-1;for(var u=0;u<n;u++){i.subarray(u*s,u*s+s).set(e.subarray(o*s,o*s+s));o--}return i}function gbGIS_GetBinaryString_ForTypedArray_u08(e){var t=null;if(e.length>65536){var n=8192;var r=e.length/n;var t="";for(var i=0;i<n*r;i+=n){t+=String.fromCharCode.apply(null,e.subarray(i,i+n))}if(e.length%n!=0){t+=String.fromCharCode.apply(null,e.subarray(r*n,e.length))}}else{t=String.fromCharCode.apply(null,e)}return t}function gbGIS_GetBase64String_ForTypedArray_u08(e){return window.btoa(gbGIS_GetBinaryString_ForTypedArray_u08(e))}function gbGIS_GetTypedArray_ForBase64String_u08(e){return new Uint8Array(window.atob(e).split("").map(function(e){return e.charCodeAt(0)}))}function gbGIS_GetRemoveAllSpaces_str(e){var t="";var n;for(var r=0;r<e.length;r++){n=e.substring(r,r+1);if(n!=" "){t+=n}}return t}function GetQuadDownsample_u08(e,t,n,r){var i=new Uint8Array(e.length>>>2);var s=0;var o=0;var u=0;var a;var f;var l;var c;var h;var p;var d;var v;var m;var g=0;var y;for(p=0;p<n;p+=2){s=0;d=p*n;v=(p+1)*n;m=o*(n>>>1);for(h=0;h<t;h+=2){u=0;a=e[d+h];f=e[d+h+1];l=e[v+h];c=e[v+h+1];if(a!=0)u++;if(f!=0)u++;if(l!=0)u++;if(c!=0)u++;var y=m+s;if(u>0){if(r){i[y]=a;if(f>i[y])i[y]=f;if(l>i[y])i[y]=l;if(c>i[y])i[y]=c}else{if(u==1){i[m+s]=a+f+l+c}else if(u==2){i[m+s]=(a>>>1)+(f>>>1)+(l>>>1)+(c>>>1)}else if(u==3){g=(a+f+l+c)*.333333333333+.5;if(g>255)g=255;i[m+s]=g}else if(u==4){i[m+s]=(a>>>2)+(f>>>2)+(l>>>2)+(c>>>2)}}}s++}o++}return i}function gbGIS_RequireJS(url){if(LOCAL_TEST_MODE){document.write('<script src="'+url+'" type="text/javascript"></script>');return}var ajax=new XMLHttpRequest;ajax.open("GET",url,false);ajax.onreadystatechange=function(){var script=ajax.response||ajax.responseText;if(ajax.readyState===4){switch(ajax.status){case 200:eval.apply(window,[script]);console.log("script loaded: ",url);break;default:console.log("ERROR: script not loaded: ",url);break}}};ajax.send(null)}function gbGIS_Idx_ShouldLoadTile_layerId(e,t,n,r,i,s,o,u,a,f,l,c,h){var p;var d=gbGIS_Idx_FindBitmapIdx_ForLayerId(e,n,r,i,s,o,u,a,f,l,c,h);if(d>-1){var v=u[d];var m=a[d];var g=c[d];v=gbGIS_Proj_MercXZtoMercXZ(v,IDX_Z_FOR_XYS,g);m=gbGIS_Proj_MercXZtoMercXZ(m,IDX_Z_FOR_XYS,g);v>>>=8;m>>>=8;p=gbGIS_Idx_IsInBitmapIdxs(e,t,n,r,i,d,v,m,g)}else{p=true}return p}function gbGIS_Idx_IsBitmapIdxValueData(e,t,n){return(n[(t>>>2<<6)+(e>>>2)]&1<<(t-(t>>>2<<2)<<2)+(e-(e>>>2<<2)))!=0}function gbGIS_Idx_IsInBitmapIdx(e,t,n,r,i,s,o){var u=false;var a=gbGIS_Proj_MercXZtoMercXZ(e<<8,n,s);var f=gbGIS_Proj_MercXZtoMercXZ(t<<8,n,s);var l=gbGIS_Proj_MercXZtoMercXZ((e<<8)+255,n,s);var c=gbGIS_Proj_MercXZtoMercXZ((t<<8)+255,n,s);var h;a-=r<<8;f-=i<<8;l-=r<<8;c-=i<<8;for(var p=f;p<=c;p++){for(h=a;h<=l;h++){if(gbGIS_Idx_IsBitmapIdxValueData(h,p,o)){u=true;break}}if(u){break}}return u}function gbGIS_Idx_FindBitmapIdx_ForLayerId(e,t,n,r,i,s,o,u,a,f,l,c){if(e>=c||e<2){return-1}if(r<=8){return s[e]}var h=-1;var p;var d;var v;var m;var g;var y;y=gbGIS_Proj_MercXZtoMercXZ(256,r,IDX_Z_FOR_XYS)-1;d=gbGIS_Proj_MercXZtoMercXZ(t<<8,r,IDX_Z_FOR_XYS);v=gbGIS_Proj_MercXZtoMercXZ(n<<8,r,IDX_Z_FOR_XYS);m=d+y;g=v+y;for(p=i[e];p<=s[e];p++){if(d>=o[p]&&d<a[p]&&m>=o[p]&&m<a[p]&&v>=u[p]&&v<f[p]&&g>=u[p]&&g<f[p]){h=p;break}}return h}function gbGIS_Idx_IsInBitmapIdxs(e,t,n,r,i,s,o,u,a){var f=true;var l=t[s];if(l){f=gbGIS_Idx_IsInBitmapIdx(n,r,i,o,u,a,l)}return f}function gbGIS_GetLayerIdsFromLoHiIdx(e,t,n){var r=new Int32Array(n);var i;var s;for(var o=0;o<n;o++){r[o]=0}for(var u=1;u<e.length;u++){i=e[u];s=t[u];if(i>0||u==2){for(var a=i;a<=s;a++){if(r[a]==0){r[a]=u}}}}return r}function gbGIS_GetBitstoresCollection(e,t,n,r,i){var s=new Array(e.length);var o=gbGIS_GetLayerIdsFromLoHiIdx(r,i,e.length);for(var u=0;u<e.length;u++){var a=e[u];var f=t[u];var l=n[u];var c=o[u];a=gbGIS_Proj_MercXZtoMercXZ(a,IDX_Z_FOR_XYS,l);f=gbGIS_Proj_MercXZtoMercXZ(f,IDX_Z_FOR_XYS,l);a>>>=8;f>>>=8;var h=GetBitmapIdx(c,a,f,l);if(h){s[u]=h}}return s}function gbGIS_Idx_GetBytemapForBitmap(e,t,n){var r=new Uint8Array(65536);var i;var s;var o;if(n==0){for(i=0;i<256;i++){o=i<<8;for(s=0;s<256;s+=8){if(gbGIS_Idx_IsBitmapIdxValueData(s,i,e))r[o+s]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+1,i,e))r[o+s+1]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+2,i,e))r[o+s+2]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+3,i,e))r[o+s+3]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+4,i,e))r[o+s+4]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+5,i,e))r[o+s+5]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+6,i,e))r[o+s+6]=t;if(gbGIS_Idx_IsBitmapIdxValueData(s+7,i,e))r[o+s+7]=t}}}else{for(i=0;i<256;i++){o=i<<8;for(s=0;s<256;s+=8){r[o+s]=gbGIS_Idx_IsBitmapIdxValueData(s,i,e)?t:n;r[o+s+1]=gbGIS_Idx_IsBitmapIdxValueData(s+1,i,e)?t:n;r[o+s+2]=gbGIS_Idx_IsBitmapIdxValueData(s+2,i,e)?t:n;r[o+s+3]=gbGIS_Idx_IsBitmapIdxValueData(s+3,i,e)?t:n;r[o+s+4]=gbGIS_Idx_IsBitmapIdxValueData(s+4,i,e)?t:n;r[o+s+5]=gbGIS_Idx_IsBitmapIdxValueData(s+5,i,e)?t:n;r[o+s+6]=gbGIS_Idx_IsBitmapIdxValueData(s+6,i,e)?t:n;r[o+s+7]=gbGIS_Idx_IsBitmapIdxValueData(s+7,i,e)?t:n}}}return r}function gbGIS_Idx_Get2DArrayForBytemap(e,t,n){var r=new Array;var i;var s;for(i=0;i<n;i++){var o=new Array;for(s=0;s<t;s++){o.push(e[i*n+s])}r.push(o)}return r}function gbGIS_Idx_GetBitmapIdxCell_u16(e,t,n){var r=0;var i=0;var s=0;var o;var u;var a;for(u=n;u<n+4;u++){a=u<<8;for(o=t;o<t+4;o++){if(e[a+o]!=i){s|=1<<r}r++}}return s}function gbGIS_Idx_GetNewBitmapIndexTile_FromTilePlanarAny_u16(e){var t=new Uint16Array(4096);var n=0;var r=0;var i;var s;for(s=0;s<256;s+=4){n=0;for(i=0;i<256;i+=4){t[r+n]=gbGIS_Idx_GetBitmapIdxCell_u16(e,i,s);n++}r+=64}return t}function gbGIS_Idx_GetNewBitmapIndexTile_FromRGBA8888_u16(e,t){var n=new Uint16Array(4096);var r=0;var i=0;var s;var o;var u=t?0:3;for(o=0;o<256;o+=4){r=0;for(s=0;s<1024;s+=4){n[i+r]=gbGIS_Idx_GetBitmapIdxCell_u16(e,s+u,o);r++}i+=64}return n}function DumpBitmapToConsole(e){for(var t=0;t<64;t++){var n="[";for(var r=0;r<64;r++){n+=e[t*64+r]==0?"0":"1"}n+="]";console.log("[%s%d] %s",t<10?" ":"",t,n)}}function gbGIS_Idx_GetNewVector_FromCanvasBufferDataBytes_RGBA8888(e){var t=new Uint8Array(e.length);for(var n=0;n<e.length;n++){t[n]=e[n]}return t}function gbGIS_Idx_Convert_RGBA8888_to_Planar8(e,t,n,r){var i=new Uint8Array(65536);var s=0;for(var o=0;o<e.length;o+=4){i[s]=e[o+t];s++}return i}function GetBitstores_v2(){var e=new Array(_bs_x0s.length);var t=gbGIS_GetLayerIdsFromLoHiIdx(_bs_loIdxs,_bs_hiIdxs,_bs_x0s.length);for(var n=0;n<_bs_x0s.length;n++){var r=_bs_x0s[n];var i=_bs_y0s[n];var s=_bs_zs[n];var o=t[n];r=gbGIS_Proj_MercXZtoMercXZ(r,IDX_Z_FOR_XYS,s);i=gbGIS_Proj_MercXZtoMercXZ(i,IDX_Z_FOR_XYS,s);r>>>=8;i>>>=8;var u=GetBitmapIdx(o,r,i,s);if(u){var a=new gbGIS_Index_Bitstore(o,r,i,s,u);e[n]=a}}return e}function gbGIS_GetBMP_ForPlanar8_Cached_str(e,t,n){if(_cached_v1bmp_header_str==null){_cached_v1bmp_header_str=gbGIS_GetBinaryString_ForTypedArray_u08(gbGIS_GetBMPHeader_v1_BGRA8888(t,n))}return _cached_v1bmp_header_str+gbGIS_GetApplyLutToPlanar8_OLD_str(e)+"\0\0"}function gbGIS_GetBMP_ForBGRA8888_Cached(e,t,n){if(_cached_v1bmp_header_u08==null){_cached_v1bmp_header_u08=gbGIS_GetBMPHeader_v1_BGRA8888(t,n)}return gbGIS_vcombinen_u08(_cached_v1bmp_header_u08,gbGIS_GetFlippedImageBuffer(e,t,n,4),2)}function gbGIS_GetBMP_ForBGRA8888(e,t,n){var r=gbGIS_GetBMPHeader_v1_BGRA8888(t,n);var i=gbGIS_GetFlippedImageBuffer(e,t,n,4);var s=gbGIS_vcombinen_u08(r,i,2);return s}function gbGIS_GetBMP_ForPlanar8_InstanceLUT(e){var t=gbGIS_GetApplyLutToPlanar8_OLD_u08(e,GeosenseLUT);var n=gbGIS_GetBMP_ForBGRA8888_Cached(t,256,256);return n}function gbGIS_GetApplyLutToPlanar8_OLD_str(e){if(_cached_LUT_bgra_str==null){_cached_LUT_bgra_str=gbGIS_GetBGRAstrLUT_ForJaggedRGBLUT(GeosenseLUT)}if(_cached_LUT_zero_chunk==null){_cached_LUT_zero_chunk="\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"+"\0\0\0\0"}if(_cached_LUT_zero_row==null){_cached_LUT_zero_row=_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk+_cached_LUT_zero_chunk}var t="";var n;var r;var i;var s;for(n=255;n>=0;n--){r=n<<8;if(!gbGIS_GetHasAnyData(e,r,0,256)){t+=_cached_LUT_zero_row}else{for(i=0;i<256;i+=16){s=r+i;if(!gbGIS_GetHasAnyData(e,s,0,16)){t+=_cached_LUT_zero_chunk}else{t+=_cached_LUT_bgra_str[e[s]]+_cached_LUT_bgra_str[e[s+1]]+_cached_LUT_bgra_str[e[s+2]]+_cached_LUT_bgra_str[e[s+3]]+_cached_LUT_bgra_str[e[s+4]]+_cached_LUT_bgra_str[e[s+5]]+_cached_LUT_bgra_str[e[s+6]]+_cached_LUT_bgra_str[e[s+7]]+_cached_LUT_bgra_str[e[s+8]]+_cached_LUT_bgra_str[e[s+9]]+_cached_LUT_bgra_str[e[s+10]]+_cached_LUT_bgra_str[e[s+11]]+_cached_LUT_bgra_str[e[s+12]]+_cached_LUT_bgra_str[e[s+13]]+_cached_LUT_bgra_str[e[s+14]]+_cached_LUT_bgra_str[e[s+15]]}}}}return t}function gbGIS_GetBGRAstrLUT_ForJaggedRGBLUT(e){var t=new Array(e.length);for(var n=0;n<e.length;n++){t[n]=String.fromCharCode(e[n][2])+String.fromCharCode(e[n][1])+String.fromCharCode(e[n][0])+String.fromCharCode(n==0?0:255)}t[255]=String.fromCharCode(255)+String.fromCharCode(0)+String.fromCharCode(0)+String.fromCharCode(255);t[16]=String.fromCharCode(0)+String.fromCharCode(255)+String.fromCharCode(0)+String.fromCharCode(255);t[8]=String.fromCharCode(0)+String.fromCharCode(0)+String.fromCharCode(255)+String.fromCharCode(255);return t}function gbGIS_GetApplyPlanarLutsToPlanar8_BGRA8888(e,t,n,r,i){var s=new Uint8Array(e.length*4);var o=0;var u;for(var a=0;a<e.length;a++){u=e[a];s[o++]=r[u];s[o++]=n[u];s[o++]=t[u];s[o++]=i[u]}return s}function gbGIS_GetApplyInterleavedLutToPlanar8_u08(e,t){var n=new Uint8Array(e.length*4);var r=0;var i;for(var s=0;s<e.length;s++){i=e[s]<<2;n[r++]=t[i];n[r++]=t[i+1];n[r++]=t[i+2];n[r++]=t[i+3]}return n}function gbGIS_GetApplyLutToPlanar8_OLD_u08(e,t){var n=new Uint8Array(e.length*4);var r=0;var i;for(var s=0;s<e.length;s++){i=e[s];n[r]=t[i][2];n[r+1]=t[i][1];n[r+2]=t[i][0];n[r+3]=i==0?0:255;r+=4}return n}function gbGIS_FillCachedLUTsFromJaggedLUT_u08(){_cached_LUTr_u08=new Uint8Array(256);_cached_LUTg_u08=new Uint8Array(256);_cached_LUTb_u08=new Uint8Array(256);_cached_LUTa_u08=new Uint8Array(256);for(var e=0;e<256;e++){_cached_LUTr_u08[e]=GeosenseLUT[e][0];_cached_LUTg_u08[e]=GeosenseLUT[e][1];_cached_LUTb_u08[e]=GeosenseLUT[e][2];_cached_LUTa_u08[e]=e==0?0:255}_cached_LUTr_u08[255]=0;_cached_LUTg_u08[255]=0;_cached_LUTb_u08[255]=255;_cached_LUTr_u08[16]=0;_cached_LUTg_u08[16]=255;_cached_LUTb_u08[16]=0;_cached_LUTr_u08[8]=255;_cached_LUTg_u08[8]=0;_cached_LUTb_u08[8]=0}function gbGIS_GetApplyLutToPlanar8_Cached_RGBA8888(e){if(_cached_LUTr_u08==null){gbGIS_FillCachedLUTsFromJaggedLUT_u08()}var t=new Uint8Array(e.length*4);var n=0;var r;for(var i=0;i<e.length;i++){r=e[i];t[n++]=_cached_LUTr_u08[r];t[n++]=_cached_LUTg_u08[r];t[n++]=_cached_LUTb_u08[r];t[n++]=_cached_LUTa_u08[r]}return t}function gbGIS_GIF_GetGIFHeader(e,t,n){var r=new Uint8Array(416);var i=0;var s=0;var o=0;r[i++]=71;r[i++]=73;r[i++]=70;r[i++]=56;r[i++]=57;r[i++]=97;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=1;r[i++]=246;r[i++]=0;r[i++]=0;for(s=0;s<128;s++){o=(s<<1)+1;r[i++]=n[o][0];r[i++]=n[o][1];r[i++]=n[o][2]}r[i++]=33;r[i++]=249;r[i++]=4;r[i++]=1;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=44;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=7;return r}function gbGIS_GIF_GetGIFFooter(){var e=new Uint8Array(4);var t=0;e[t++]=1;e[t++]=129;e[t++]=0;e[t++]=59;return e}function gbGIS_GIF_GetGIFImageData(e,t){if(t==false){gbGIS_vshr_n_u08(e,0,1,e.length)}var n=0;var r=0;var i=7;var s=(1<<i)-2;var o=e.length/s|0;var u=o*s;var a=s+1;var f=1<<i;var l=o*2+2;var c=new Uint8Array(e.length+l);for(var h=0;h<u;h+=s){c[n++]=a;c[n++]=f;c.set(e.subarray(r,r+s),n);n+=s;r+=s}if(e.length%s!=0){var p=e.length-u;c[n++]=p+1;c[n++]=f;c.set(e.subarray(r,r+p),n);n+=p;r+=p}return c}function gbGIS_GIF_GetGIFForPlanar8_u08(e,t,n,r,i){var s=gbGIS_GIF_GetGIFHeader(t,n,r);var o=gbGIS_GIF_GetGIFImageData(e,i);var u=gbGIS_GIF_GetGIFFooter();var a=gbGIS_vcombinen_u08(s,o);var f=gbGIS_vcombinen_u08(a,u);s=null;o=null;u=null;a=null;return f}function gbGIS_GIF_GetGIFForPlanar8_Cached_str(e,t,n,r,i){if(_cached_GIF_header_str==null){_cached_GIF_header_str=gbGIS_GetBinaryString_ForTypedArray_u08(gbGIS_GIF_GetGIFHeader(t,n,r))}if(_cached_GIF_footer_str==null){_cached_GIF_footer_str=gbGIS_GetBinaryString_ForTypedArray_u08(gbGIS_GIF_GetGIFFooter())}var s=gbGIS_GIF_GetGIFImageData(e,i);var o=_cached_GIF_header_str+gbGIS_GetBinaryString_ForTypedArray_u08(s)+_cached_GIF_footer_str;s=null;return o}function gbGIS_GetBMPHeader_v1_BGRA8888(e,t){var n=54;var r=new Uint8Array(n);var i=0;r[i++]=66;r[i++]=77;r[i++]=56;r[i++]=0;r[i++]=4;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=54;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=40;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=0;r[i++]=1;r[i++]=0;r[i++]=32;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=2;r[i++]=0;r[i++]=4;r[i++]=0;r[i++]=18;r[i++]=11;r[i++]=0;r[i++]=0;r[i++]=18;r[i++]=11;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;r[i++]=0;return r}function gbGIS_GIF_GetBase64_Planar8IC_ForPlanar8(e,t,n,r){var i=gbGIS_GIF_GetGIFForPlanar8_Cached_str(e,t,n,GeosenseLUT,r);return"data:image/gif;base64,"+window.btoa(i)}function gbGIS_BMP_GetBase64_BGRA8888_ForPlanar8(e,t,n){return"data:image/bmp;base64,"+window.btoa(gbGIS_GetBMP_ForPlanar8_Cached_str(e,t,n))}function gbGIS_GIF_InsertLlamaInto(e,t,n,r,i){if(typeof e=="string"){var s=document.getElementById(e);if(s&&s.tagName&&s.tagName=="IMG"){s.src=gbGIS_GIF_GetBase64_Planar8IC_ForPlanar8(t,n,r,i)}}else{e.src=gbGIS_GIF_GetBase64_Planar8IC_ForPlanar8(t,n,r,i)}}function gbGIS_BMP_InsertLlamaInto(e,t,n,r){if(typeof e=="string"){var i=document.getElementById(e);if(i&&i.tagName&&i.tagName=="IMG"){i.src=gbGIS_BMP_GetBase64_BGRA8888_ForPlanar8(t,n,r)}}else{e.src=gbGIS_BMP_GetBase64_BGRA8888_ForPlanar8(t,n,r)}}function tempOverrideAlpha(e,t){var n=parseInt(t*255);for(var r=0;r<e.length;r+=4){if(e[r+3]!=0){e[r+3]=n}}}function Test_GetGIF_ForSafecastBitmapIndex_ForTileXYZ(e,t,n){var r=null;var i=null;var s;var o=BITS.c_GetNewPxExtentVector_u32(e,t,n,IDX_Z_FOR_XYS);for(var u=0;u<_layerBitstores.length;u++){if(_layerBitstores[u]!=null&&_layerBitstores[u].layerId==2){for(s=0;s<_layerBitstores[u].bitstores.length;s++){if(_layerBitstores[u].bitstores[s].x==e&&_layerBitstores[u].bitstores[s].y==t&&_layerBitstores[u].bitstores[s].z==n){r=_layerBitstores[u].bitstores[s].data;break}}}}if(r!=null){var a=gbGIS_Idx_GetBytemapForBitmap(r,127,0);i=gbGIS_GIF_GetBase64_Planar8IC_ForPlanar8(a,256,256,true)}return i}function TestDumpBasemap(e,t,n,r){var i=1<<e;var s=256*r;var o=(1<<n)*256*r;var u=o/i;var a;var f;var l;var c;var h;var p;for(p=0;p<i;p++){for(h=0;h<i;h++){a=gbGIS_Proj_MercXZtoMercXZ(h,e,n);f=gbGIS_Proj_MercXZtoMercXZ(p,e,n);l=h*u;c=p*u;document.write('<div style="position:absolute; top:'+c+"; left: "+l+"; opacity:"+t+';"><IMG src="http://tile.stamen.com/toner-background/'+e+"/"+h+"/"+p+'.png" width="'+u+'" height="'+u+'"></div>')}}}function DumpTxt(){for(var e=0;e<_layerBitstores.length;e++){var t=_layerBitstores[e];console.log("[%d] [%s] LayerId:%d, bitstores:%d z:{%d - %d}, urlTemplate:[%s]",e,t.isReady?"RDY!":"WAIT",t.layerId,t.bitstores.length,t.minZ,t.maxZ,t.urlTemplate);for(var n=0;n<t.bitstores.length;n++){var r=t.bitstores[n];console.log("[%d][%d] [%s] -- LayerId:%d  Bitstore: x=%d, y=%d, z=%d.  LEN(data)=%d.",e,n,r.isReady?"RDY!":"WAIT",r.layerId,r.x,r.y,r.z,r.data!=null?r.data.length:-1)}}}function TestDump(e,t){var n=false;for(var r=0;r<_layerBitstores.length;r++){var i=_layerBitstores[r];if(i.bitstores.length==1&&i.idx_lazyload_detail&&!i._didLazyLoad){i.FinishLazyLoadInit();n=true}else if(i.bitstores.length>1){if(i.ForceLoadHusks()){n=true}}}var s=0;for(var r=0;r<_layerBitstores.length;r++){var i=_layerBitstores[r];for(var o=i.bitstores.length-1;o>=0;o--){if(!i.bitstores[o].needGet&&!i.bitstores[o].getting&&!i.bitstores[o].needProc)s++}}if(s<60||n){setTimeout(function(){TestDump(e,t)},100);return}var u="";var a="'";var f=255;var l=0;if(e){var u='<td style="background:gainsboro; border: 1px solid black; font-size: 60%; font-family: Futura,'+a+"Futura Md BT"+a+","+a+"Century Gothic"+a+","+a+"Segoe UI"+a+',Helvetica,Arial,sans-serif;">';document.write("<table>")}else{var c='<br/><br/><br/><span style="font-size:33%;">Map tiles by <a href="http://stamen.com" target="_blank"><font color=black>Stamen Design</font></a>, under <a href="http://creativecommons.org/licenses/by/3.0" target="_blank"><font color=black>CC BY 3.0</font></a>. Data by <a href="http://openstreetmap.org" target="_blank"><font color=black>OpenStreetMap</font></a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0" target="_blank"><font color=black>CC BY SA</font></a>.</span>';var h='<div style="position:absolute; top:20; left: 20; width: 560;padding:20;opacity:0.8; z-index: 90000; color:black;font-size:80%;font-family: Futura,'+a+"Futura Md BT"+a+","+a+"Century Gothic"+a+","+a+"Segoe UI"+a+',Helvetica,Arial,sans-serif;background-color:rgba(255,255,255,0.8);">';var p="</div>";var d="<h3>Bitmap Index Visualization Map</h3>";var v="This is a dynamic visualization of the internal bitmap indices used by JavaScript in your browser in order to improve efficiency when viewing the Safecast tile map."+"<br/><br/>";var m="Each data set is assigned a unique color: <ul><li>Safecast: blue</li><li>NNSA: green</li><li>NURE: red</li></ul>"+"<br/>";var g="";var y="Bitmap indices improve effieciency and performance primarily by preventing wasted HTTP requests to the server to get a blank tile.  They also reduce memory use by the client, which is significant on mobile devices."+"<br/><br/>";var b="The issue prompting their use is that existing APIs and GIS tools usually do not handle large, porous datasets well.  Using point features/geometry is notably problematic as they have difficulty scaling as the dataset size increases.  Raster tiles scale much more robustly; even so, issues remain."+"<br/><br/>";var w='Testing showed that in many cases more time was spent attempting to load blank tiles than the ones containing data.  Worse, if the tile is 404 on the server, it will be <a href="https://code.google.com/p/gmaps-api-issues/issues/detail?id=6732&can=4&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal" target="_blank"><font color=black>repeatedly requested whenever the map is panned back</font></a> as the map API does not remember this.  The traditional GIS solution -- a rectangular extent -- is only of limited benefit as the extent of the Safecast dataset is global.'+"<br/><br/>";var E="Recall that one of the primary ways John Carmack improved performance with early idTech engines was by very efficiently indexing data prior to its use; BSP trees, for example, helped prevent drawing geometry that will be covered by something else.  The same principle applies here: do not waste time on what will not be seen."+"<br/><br/>";var S="Some of this can be solved on the server.  By using an .htaccess access redirect, or better still, directly serving a blank tile as if it were the original request, the repeated loads of the 404 tile are eliminated.  However, while a blank tile is small, the connection is not free, nor the 256KB of RAM per uncompressed tile on the client.  In fact, this approach worsens initial load speeds, as the .htaccess redirect requires two HTTP GETs."+"<br/><br/>";var x="Thus, something smarter is needed.  If the tiles are known <i>a priori</i>, then it becomes a matter of checking tile requests before they go to the server.  A bitmap index happens to do just that rather efficiently."+"<br/><br/>";var T='The most basic form of this kind of indexing would be a directory listing of the tile PNGs at all <a href="http://msdn.microsoft.com/en-us/library/bb259689.aspx" target="_blank"><font color=black>zoom levels</font></a>.  This would be slow, however, and too large to transfer in a reasonable amount of time.  But consider a directory listing of the zoom level 8 tiles alone.  With just that information, it could be predicted with 100% certainty whether or not to load every zoom level 0 - 8 tile in the dataset, with increasing false positives after that.'+"<br/><br/>";var N="At zoom level 8, the world map is 8k pixels x 8k pixels, or 256 x 256 tiles.  If you represented this visually, it would be a 256x256 pixel image.  Convieniently, this is also the zoom level 0 tile.  An example of this can be easily seen here; the single NURE index tile is displayed in red over the US and Canada.  That is the zoom level 0 tile compacted to 1 bit per pixel, exactly as was just described above.  This visualization helps show that although that single index tile is not particularly high resolution, for a trivial amount of memory and computing cost it can provide significantly more information about what data to load than the extent alone for certain datasets."+"<br/><br/><br/>";var C="To create this visualization, the individual bitmap index tiles (n=4k Uint16Arrays) were programmatically converted to one byte per pixel (n=64k Uint8Arrays), then dynamically rendered on the client by appending a .BMP header, then wrapping in div elements with absolute positioning."+"<br/><br/>";var k="<h3>Bitmap Rendering Tests</h3>";var L=(t!=0?' <a href="'+_cached_baseURL+'?showIndices=2&rendererId=0"><font color=black>':" ")+"[bmplib.js]"+(t!=0?"</font></a>":"");var A=(t!=1?' <a href="'+_cached_baseURL+'?showIndices=2&rendererId=1"><font color=black>':" ")+"[BMP A]"+(t!=1?"</font></a>":"");var O=(t!=2?' <a href="'+_cached_baseURL+'?showIndices=2&rendererId=2"><font color=black>':" ")+"[Canvas (T)]"+(t!=2?"</font></a>":"");var M=(t!=3?' <a href="'+_cached_baseURL+'?showIndices=2&rendererId=3"><font color=black>':" ")+"[Canvas (L)]"+(t!=3?"</font></a>":"");var _=(t!=4?' <a href="'+_cached_baseURL+'?showIndices=2&rendererId=4"><font color=black>':" ")+"[GIF]"+(t!=4?"</font></a>":"");var D="Client Bitmap Renderers:"+L+A+O+M+_+"<br/><br/>";var P="bmp_lib.js operates in indexed color mode, and is the more compatible option.  Its primary drawback is that it does not support alpha or transparency bitmasks.  The secondary is the performance; like most all non-native JS code, it is limited to storing binary data as text, meaning in-memory image buffers must be encoded twice, then decoded twice.  (bytes to string to base64)";var H="The custom BGRA8888 BMP renderer was created to overcome the limits bmp_lib.js had with lacking an alpha channel.  Unfortunately, this has compatibility issues -- while it works just fine with Chrome, Safari ignores the alpha channel and Internet Explorer displays nothing at all, even new versions of IE.  The code is a port of C code which combines a cached BMP header and a y-flipped image buffer, applying the indexed color to the buffer directly.  In C, this is quite performant.  In JavaScript, it is not.  Despite using typed arrays to gain access to true underlying C types in the JS VM (uint8_t*), the image buffer must be encoded and decoded in two steps (bytes to string to base64).  This is somewhat compensated for -- the header is cached as a string, and the LUT applies cached interleaved BGRA quads as strings.";var B="The HTML5 canvas renderer has transparency that works even in Safari, but is oddly slow in it.  This works by rendering a buffer to an offscreen context, then rendering the resulting canvas image from that to a new canvas element added to the document for each tile.  While the performance is much better in Chrome, it is still disappointing for native code, and only a minor part of that can be readily explained (incorrect byte order = swizzling). Further, the use of ctx.scale(f,f) results in downsampling images using nearest neighbor interpolation.  Yes.  In every browser.";var j="The HTML5 canvas renderer has transparency that works even in Safari, but is oddly slow in it.  This works by rendering a buffer to an offscreen context, then rendering the resulting canvas image from that to a static number of canvas elements created in advanced, one per layer.  While the performance is much better in Chrome, it is still disappointing for native code, and only a minor part of that can be readily explained (incorrect byte order = swizzling). Further, the use of ctx.scale(f,f) results in downsampling images using nearest neighbor interpolation; however, this has been mitigated by manually resizing the images, which the other HTML5 canvas example renderer does not do.";var F="The custom uncompressed GIF89A indexed color renderer was created due to the compatibility problems with BMPs having an alpha channel and the oddly erratic performance of HTML5 canvas.  Uncompressed GIFs are a total hack, from back in the day when LZW patents were scary things, and function by emitting clear codes at a frequency equal to or greater than 2^n-2, where n is the width of the code size (color palette depth).  It is relatively fast compared to the BMP renderers, supports transparency in all browsers, and seems to enjoy whatever more robust rendering path that images get in the browser that HTML5 canvas does not.  However, as it is a GIF, it does not have a true alpha channel, and is currently operating in 7-bit color mode.";var I=null;var q=null;switch(t){case 0:I="bmplib.js";q=P;break;case 1:I="custom BGRA8888 BMP <b><font color=red>(Safari/IE/Firefox compatibility issues!)</font></b>";q=H;break;case 2:I="HTML5 canvas (per tile)";q=B;break;case 3:I="HTML5 canvas (per layer)";q=j;break;case 4:I="custom GIF";q=F;break}var R="Currently using "+I+" renderer.<br/><br/> "+q+"<br/><br/>";var U=h+d+v+m+g+y+b+w+E+S+x+T+N+C+k+D+R+c+p;document.write(U);TestDumpBasemap(4,.25,6,.25)}var z=0;var W=3;var X=0;for(var r=_layerBitstores.length-1;r>=0;r--){var i=_layerBitstores[r];for(var o=0;o<i.bitstores.length;o++){var V=i.bitstores[o];var $=i.bitstores[o].data;if($!=null){var J=V.extent[0];var K=V.extent[1];var Q=V.z;var G=i.layerId;if(e){f=127}else{f=G==2?255:G==3?16:G==6?8:127;if(t==4){f>>=1}}var Y=gbGIS_Idx_GetBytemapForBitmap($,f,l);if(e){J=gbGIS_Proj_MercXZtoMercXZ(J,IDX_Z_FOR_XYS,Q);K=gbGIS_Proj_MercXZtoMercXZ(K,IDX_Z_FOR_XYS,Q);J>>>=8;K>>>=8;if(z==0){document.write("<tr>")}document.write(u);document.write('<IMG ID="color_demo'+X+'"/width="256" height="256"><br/>');document.write("<center>layerId: ["+G);document.write("] xyz: ("+J+", "+K+") @ "+Q+"</center>");document.write("</td>");if(z==W||X==s-1){document.write("</tr>")}if(z>=W){z=0}else{z++}gbGIS_GIF_InsertLlamaInto("color_demo"+X,Y,true)}else{J>>>=IDX_Z_FOR_XYS-6;K>>>=IDX_Z_FOR_XYS-6;J>>>=2;K>>>=2;var Z=(V.extent[2]>>>IDX_Z_FOR_XYS-6)-(V.extent[0]>>>IDX_Z_FOR_XYS-6)>>>2;var et=(Q+1)/7;if(t==0){var tt=gbGIS_Idx_Get2DArrayForBytemap(Y,256,256);document.write('<div style="position:absolute; top:'+K+"; left: "+J+"; opacity:"+et+'"><IMG ID="color_demo'+X+'"width="'+Z+'" height="'+Z+'"></div>');bmp_lib.render("color_demo"+X,tt,GeosenseLUT)}else if(t==1){et*=2;et=et>1?1:et;document.write('<div style="position:absolute; top:'+K+"; left: "+J+"; opacity:"+et+'"><IMG ID="color_demo'+X+'"width="'+Z+'" height="'+Z+'"></div>');gbGIS_BMP_InsertLlamaInto("color_demo"+X,Y)}else if(t==2){et*=2;et=et>1?1:et;document.write('<div style="position:absolute; top:'+K+"; left: "+J+"; opacity:"+et+'"><canvas id="color_demo'+X+'"width='+Z+" height="+Z+"></canvas></div>");gbGIS_Canvas_DrawImageLlama_Planar8(document.getElementById("color_demo"+X).getContext("2d"),Y,0,0,256,256,Z/256,-9e3)}else if(t==3){et*=2;et=et>1?1:et;var nt=null;nt=document.getElementById("layerCanvas_"+G);if(nt==null){document.write('<div style="position:absolute;top:0;left:0;"><canvas id="layerCanvas_'+G+'" width=4096 height=4096 /></div>');nt=document.getElementById("layerCanvas_"+G)}if(Q!=6){gbGIS_Canvas_DrawImageLlama_Planar8(nt.getContext("2d"),Y,J<<2,K<<2,256,256,Z/256,et)}else{gbGIS_Canvas_DrawImageLlama_Planar8(nt.getContext("2d"),GetQuadDownsample_u08(GetQuadDownsample_u08(Y,256,256,true),128,128,true),J,K,64,64,1,et)}}else if(t==4){et*=2;et=et>1?1:et;document.write('<div style="position:absolute; top:'+K+"; left: "+J+"; opacity:"+et+'"><IMG ID="color_demo'+X+'"width="'+Z+'" height="'+Z+'"></div>');gbGIS_GIF_InsertLlamaInto("color_demo"+X,Y,true)}}}X++}}if(e){document.write("</table>")}}var IDX_Z_FOR_XYS=23>>>0;var _bs_loIdxs;var _bs_hiIdxs;var _bs_x0s;var _bs_y0s;var _bs_x1s;var _bs_y1s;var _bs_zs;var _cached_v1bmp_header_u08=null;var _cached_v1bmp_header_str=null;var _cached_LUT_bgra_str=null;var _cached_LUT_zero_chunk=null;var _cached_LUT_zero_row=null;var _cached_LUTr_u08=null;var _cached_LUTg_u08=null;var _cached_LUTb_u08=null;var _cached_LUTa_u08=null;var _cached_GIF_header_str;var _cached_GIF_footer_str;var gbGIS_Canvas_RenderToCanvasLlama=function(e,t,n){var r=document.createElement("canvas");r.width=e;r.height=t;n(r.getContext("2d"));return r};var gbGIS_Canvas_GetCanvasImageLlama_RGBA8888=function(e,t,n){return gbGIS_Canvas_RenderToCanvasLlama(t,n,function(r){var i=r.createImageData(t,n);var s=i.data;for(var o=0;o<s.length;o++){s[o]=e[o]}r.putImageData(i,0,0)})};var gbGIS_Canvas_GetCanvasImageLlama_URI=function(e,t,n){return gbGIS_Canvas_RenderToCanvasLlama(t,n,function(t){var n=new Image;n.onload=function(){t.drawImage(n,0,0)};n.src=e;t.drawImage(e,0,0)})};gbGIS_Canvas_DrawImageLlama_Planar8=function(e,t,n,r,i,s,o,u){var a=gbGIS_GetApplyLutToPlanar8_Cached_RGBA8888(t);if(u!=-9e3){tempOverrideAlpha(a,u)}var f=gbGIS_Canvas_GetCanvasImageLlama_RGBA8888(a,i,s);e.save();e.scale(o,o);e.drawImage(f,n,r);e.restore()};var GeosenseLUT=[[7,133,168],[35,126,175],[65,121,184],[93,114,191],[123,109,198],[151,103,207],[179,96,214],[255,0,0],[255,0,0],[255,0,0],[233,45,93],[244,31,56],[253,17,19],[255,26,15],[255,35,14],[0,255,0],[0,255,0],[0,255,0],[255,72,8],[255,82,8],[255,91,5],[255,100,5],[255,110,3],[255,119,1],[255,128,1],[255,135,0],[255,137,0],[255,140,0],[255,142,0],[255,142,0],[255,144,0],[255,147,0],[255,149,0],[255,149,0],[255,151,0],[255,154,0],[255,156,0],[255,158,0],[255,158,0],[255,161,0],[255,163,0],[255,165,0],[255,165,0],[255,168,0],[255,170,0],[255,172,0],[255,172,0],[255,175,0],[255,177,0],[255,179,0],[255,179,0],[255,182,0],[255,184,0],[255,186,0],[255,188,0],[255,188,0],[255,191,0],[255,193,0],[255,195,0],[255,196,0],[255,198,0],[255,200,0],[255,202,0],[255,203,0],[255,205,0],[255,207,0],[255,209,0],[255,211,0],[255,212,0],[255,214,0],[255,216,0],[255,218,0],[255,219,0],[255,219,0],[255,219,1],[255,221,1],[255,221,3],[255,221,3],[255,221,3],[255,221,5],[255,221,5],[255,221,5],[255,221,7],[255,221,8],[255,221,8],[255,221,8],[255,223,10],[255,223,10],[255,223,12],[255,223,12],[255,223,12],[255,223,14],[255,223,15],[255,223,15],[255,223,15],[255,223,17],[255,225,17],[255,225,17],[255,225,19],[255,225,19],[255,225,21],[255,225,21],[255,226,22],[255,226,22],[255,226,24],[255,226,24],[255,226,24],[255,226,26],[255,226,26],[255,226,26],[255,226,28],[255,226,28],[255,228,29],[255,228,29],[255,228,31],[255,228,31],[255,228,33],[255,228,33],[255,228,33],[255,228,35],[255,228,35],[255,228,35],[255,230,36],[255,230,38],[255,230,38],[255,230,38],[255,230,40],[255,230,40],[255,230,40],[255,230,42],[255,230,42],[255,230,43],[255,230,43],[255,232,45],[255,232,45],[255,232,47],[255,232,47],[255,232,47],[255,233,49],[255,233,49],[255,233,49],[255,233,51],[255,233,52],[255,233,52],[255,233,52],[255,233,54],[255,233,54],[255,233,56],[255,233,56],[255,235,56],[255,235,58],[255,235,59],[255,235,59],[255,235,59],[255,235,61],[255,235,61],[255,235,61],[255,235,63],[255,235,63],[255,237,65],[255,237,65],[255,237,66],[255,237,66],[255,237,68],[255,237,68],[255,237,68],[255,237,70],[255,237,70],[255,237,70],[255,239,72],[255,239,73],[255,239,73],[255,239,73],[255,239,75],[255,239,75],[255,240,75],[255,240,77],[255,240,77],[255,240,79],[255,240,79],[255,240,80],[255,240,80],[255,240,82],[255,240,82],[255,240,82],[255,242,84],[255,242,84],[255,242,84],[255,242,86],[255,242,86],[255,242,87],[255,242,87],[255,242,89],[255,242,89],[255,242,91],[255,244,91],[255,244,91],[255,244,93],[255,244,93],[255,244,93],[255,244,94],[255,244,96],[255,244,96],[255,244,96],[255,244,98],[255,244,98],[255,246,100],[255,246,100],[255,246,100],[255,246,102],[255,246,102],[255,247,103],[255,247,103],[255,247,105],[255,247,105],[255,247,105],[255,247,107],[255,247,107],[255,247,107],[255,247,109],[255,247,110],[255,247,110],[255,249,110],[255,249,112],[255,249,112],[255,249,114],[255,249,114],[255,249,114],[255,249,116],[255,249,117],[255,249,117],[255,249,117],[255,251,119],[255,251,119],[255,251,119],[255,251,121],[255,251,121],[255,251,123],[255,251,123],[255,251,124],[255,251,124],[255,251,126],[255,253,126],[255,253,126],[255,253,128],[255,253,128],[255,253,128],[255,253,130],[255,253,131],[255,253,131],[255,253,131],[255,253,133],[255,253,133],[0,0,255],[0,0,255],[0,0,255]]