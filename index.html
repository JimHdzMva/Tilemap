<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" itemscope itemtype="http://schema.org/map" style="height:100%">
<head>
<meta charset="UTF-8"> 
<meta name=viewport content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="referrer" content="origin">
<link rel="shortcut icon" href="//safecast.org/favicon.png" />
<link href="webicons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<link href="webicons/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144">
<link href="webicons/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="webicons/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
<link href="webicons/apple-touch-icon-57x57.png" rel="apple-touch-icon">

<title>Safecast Tile Map</title>

<style type="text/css">
body
{
    position:fixed;
    width:100%;
    height:100%;
    margin:0px;
    padding:0px;
}

#mainMenu, #contextMenu 
{
	position: absolute;
	min-width: 100px;
	z-index: 1000;
	background: #fff;
	border-top: solid 1px #CCC;
	border-left: solid 1px #CCC;
	border-bottom: solid 1px #676767;
	border-right: solid 1px #676767;
	padding: 0px;
	margin: 0px;
}
 
#mainMenu a, #contextMenu a 
{
	color: #000;
	text-decoration: none;
	display: block;
	line-height: 22px;
	height: 22px;
	padding: 1px 10px;
}
 
#mainMenu li, #contextMenu li 
{
    font-size: 80%;
	list-style: none;
	padding: 1px;
	margin: 0px;
}
 
#mainMenu li.hover a, #contextMenu li.hover a { background-color: #A7C4FA; }
#mainMenu li.separator, #contextMenu li.separator { border-top: solid 1px #ccc; }

@media screen and (max-height:447px) { #imgScale  { display:none; } }
@media screen and ( max-width:500px) { #searchbar { display:none; } }
@media screen and (min-width:801px) { #whatsnewdiv { left:131px;top:10px; } }
@media screen and (max-width:800px) { #whatsnewdiv { left:91px; top:10px; } }

#whatsnew, #warning_message
{
    position: absolute;
    top:0px;
    left:0px;
    right:0px;
    bottom:0px;
    z-index: 10;
    background-color: rgba(255, 255, 255, 1.0);
    padding: 20px 20px 20px 20px;
    width:424px;
    height:424px;
    font-size:80%;
    vertical-align:top;
    margin:auto;
    overflow-x:hidden;
    overflow-y:scroll;
    display:none;
}

#scale 
{
    position:absolute;
    bottom:11px;
    right:0px;
    z-index:1;
    background-color:rgba(0,0,0,0);
    padding:0px 0px 0px 0px;
    text-align:right;
}

#logo2
{
    left:10px;
    top:10px;
    position: absolute;
    z-index: 6;
    background-color: rgba(255, 255, 255, 0.75);
    padding: 0px 5px 0px 5px;
    font-size: 80%;
    vertical-align: top;
    -webkit-border-radius:3;
    -moz-border-radius:3;
    border-radius:3px;
}

#logo2, #bottombar0, .hud_btnW, #logo271, #imgScale, #hud_btnToggle { -webkit-user-select: none; -webkit-user-drag: none; }

.sc_hline { overflow: hidden; text-align: center; }

.sc_hline:before, .sc_hline:after
{
    background-color: #000;
    content: "";
    display: inline-block;
    height: 1px;
    position: relative;
    vertical-align: middle;
    width: 50%;
}

.sc_hline:before { right:0.5em; margin-left:-50%; }
.sc_hline:after { left:0.5em; margin-right:-50%; }

#bottombar0
{
    position:absolute;
    top:60px;
    left:20px;
    z-index:6;
    background-color: rgba(0,0,0,0.0);
    padding: 0px 0px 0px 0px;
}

#searchbar
{
    position:absolute;
    bottom:3px;
    left:80px;
    background-color:rgba(0,0,0,0.0);
    padding:1px 5px 0px 0px;
    opacity:0.5;
}
   
#map_canvas { width:100%; height:100%; }

.FuturaFont, .gm-style, .poi-info-window div, .poi-info-window a
{
    font-size:100%;
    font-family:Futura,Futura-Medium,'Futura Medium','Futura ND Medium','Futura Std Medium','Futura Md BT','Century Gothic','Segoe UI',Helvetica,Arial,sans-serif !important;
}

#popup
{
    position:absolute;
    top:30px;
    left:30px;
    width:420px;
    height:570px;
    font-size: 60%;
    margin:10px auto; 
    border:1px solid #333;
    background-color:rgba(255,255,255,0.8);
    cursor:pointer;
    padding:10px;
    overflow-x:hidden;
    overflow-y:scroll;
    z-index:9;
}

.noblur img
{
    image-rendering:optimizeSpeed;
    image-rendering:-moz-crisp-edges;
    image-rendering:-o-crisp-edges;
    image-rendering:-webkit-optimize-contrast;
    image-rendering:optimize-contrast;
    image-rendering:crisp-edges;
    image-rendering:pixelated;
    -ms-interpolation-mode:nearest-neighbor;
}

.hud_btnW
{
    color:#000000;
    background:rgba(0,0,0,0.0);
    padding:2px 2px 2px 2px;
    border:solid #000000 1px;
    -webkit-border-radius:3;
    -moz-border-radius:3;
    border-radius: 3px;
    white-space:nowrap;
    margin:0px 1px 0px 0px;
}

.hud_btnW:hover { background:#EFEFEF; text-decoration:none; }
.sclinks { color:#000; text-decoration:underline; }
.sctd { width:33%; text-align:center; padding:0px; }

#sctbl
{
    width:181px;
    border:0px;
    padding:0px;
    border-spacing:0px;
    border-collapse:collapse;
}

#logo271
{
    padding:5px 0px 0px 0px;
    border:0px;
    margin:0px 0px -2px 0px;
    visibility:hidden;
}

#imgScale { margin-top:-2px; }

#layers
{
   border:1px solid #808080;
   height:18px;
   font-size:11px;
   vertical-align:middle;
   width:171px;
}






#tsPanel
{
    display:none;
    position:absolute;
    top:86px;
    left:10px;
    z-index:5;
    vertical-align:top;
    padding:0px;
    background-color:rgba(255, 255, 255, 0.0);
}

#tsPanelTitle
{
    width:175px;
    font-size:19px;
    text-align:center;
    vertical-align:middle;
    padding:1px 0px 1px 0px;
    -webkit-border-radius:3 3 0 0;
    -moz-border-radius:3 3 0 0;
    border-radius:3px 3px 0px 0px;
    background-color:#FFF;
}

#tsPanelContent
{
    -webkit-border-radius:0 3 3 3;
    -moz-border-radius:0 3 3 3;
    border-radius:0px 3px 3px 3px;
    background-color:rgba(255, 255, 255, 0.85);
}

#tsPanelContentTitle
{
    font-size:10px;
    text-align:left;
    vertical-align:middle;
    padding:1px 0px 1px 30px;
}

#tsPanelContentTable
{
    width:227px;
    height:92px;
    border:0px;
    padding:0px 5px 0px 5px;
    border-spacing:0px;
    border-collapse:collapse;
}


.tsInfoTd, .tsDateTd { white-space: nowrap; }

.tsInfoTd   { text-align:left;   padding:3px 0px 3px 0px; font-size:9px; margin-bottom:5px; }
.tsDateTd   { text-align:center; padding:0px;             font-size:16px; }
.tsSliderTd { text-align:center; padding-top:15px; }



.tsInfoLabel, .tsInfoSubLabel { padding:0px 0px 0px 10px; }

.tsInfoLabel    { font-size:19px; }
.tsInfoSubLabel { font-size:10px; }





#tsStartDate, #tsEndDate
{ 
    text-align:center; 
    vertical-align:middle; 
    padding:4px 10px 4px 10px; 
    -webkit-border-radius:3;
    -moz-border-radius:3;
    border-radius:3px;
    background-color:#FFF; 
}





#tsSliderContainer
{
    position:relative;
    width:100%;
    height:36px;
}

#tsTickImage, #tsSliderSubcontainer
{
    display:block;
    position:absolute;
    width:200px;
    left:0px;
    right:0px;
    margin:0px auto 0px auto;
    padding:0px;
}

#tsTickImage
{
    top:0px;
    height:4px;
}

#tsSliderSubcontainer
{
    top:10px;
    height:15px;
}

#tsSlider 
{ 
    width:200px;
    height:15px;
    margin:0px;
    padding:0px;
}
</style>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script type="text/javascript">

function IdxBaseUrl()
{
    //var tzmi  = (new Date()).getTimezoneOffset();
    //var is_jp = (-540 - 180) <= tzmi && tzmi <= (-540 + 180);
    //return "http://tilemap" + (is_jp ? "jp" : "") + ".safecast.org.s3.amazonaws.com/";
    return "";
}

function InitCodeBehind()
{
    var el   = document.createElement("script");
    el.async = true;
    el.type  = "text/javascript";
    var cb   = function(e) { initialize(); el.removeEventListener("load", cb); };
    el.addEventListener("load", cb, false);
    el.src = IdxBaseUrl() + "safemap_min.js?" + (new Date()).getTime();
    var head = document.getElementsByTagName("head")[0];
    head.appendChild(el);
}

function _gelid(n){return document.getElementById(n);}
function _nua(s){return navigator.userAgent.indexOf(s)>-1;}

function ShowBrowserWarningWindowIfNeeded()
{
    var ua   = window.navigator.userAgent;
    var msie = ua.indexOf('MSIE ');
    var old_ie = msie <= 0 ? false : parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10) < 10;
    if (!old_ie && "ArrayBuffer" in window && "bind" in Function.prototype && ("EventTarget" in window || "addEventListener" in window)) return false;
    document.write("<b>Error:</b> Your browser is not supported by this webpage or the Google Maps API.<br/>");
    return true;
}

function InitGMapsStyleHack()
{
    var ff = "Futura,Futura-Medium,'Futura Medium','Futura ND Medium','Futura Std Medium','Futura Md BT','Century Gothic',Roboto,'Segoe UI',Helvetica,Arial,sans-serif";
    var fr = function(el_name) {
        var ds = _gelid("map_canvas").getElementsByTagName(el_name);
        if (ds == null) return;
        for (var i=0; i<ds.length; i++) {
            var s = ds[i].style;
            if (s != null && s.fontFamily != null && s.fontFamily.indexOf("Roboto") > -1 && s.fontFamily.indexOf("Futura") == -1) {
                ds[i].style.fontFamily = ff;
            }
        }
    };
    
    window.setTimeout(fr("div"), 500);
    window.setTimeout(fr("div"), 4000); // long delay for the basemap DDL if it doesn't load fast.
    window.setTimeout(fr("a"), 8000); // long delay for the basemap DDL if it doesn't load fast.
}

function Init()
{
    if (ShowBrowserWarningWindowIfNeeded()) return;
    InitCodeBehind();
    setTimeout(InitGMapsStyleHack, 500);
    
    setTimeout(function() {
        if (_nua("mobile") || _nua("iPhone") || _nua("iPad") || _nua("Android")) document.getElementById("scale").style.bottom = "10px"; //11 //16
    }, 500);
    
    setTimeout(function() { 
        _gelid("logo271").src = IdxBaseUrl() + "schoriz_362x44.png";
        _gelid("logo271").style.visibility = "visible";
    }, 200);
    
    setTimeout(function() { 
        _gelid("hud_btnToggle").src = IdxBaseUrl() + "reticle_62x62.png";
        _gelid("hud_btnToggle").title = "Show or hide the query tool reticle.  See a layer's value at a target location.  NOTE: The indicated precision is the color lookup classification range, not the uncertainty of the measurements."
        _gelid("imgScale").src = IdxBaseUrl() + "scale64_60x854.png";
        _gelid("imgScale").title = "Yes, it's actually 4x LOG10s.  Very loggy.";
        _gelid("scale").style.visibility = "visible";
        _gelid("tsTickImage").src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAABCAMAAADHLAisAAAABlBMVEVfMDCamppiRWYmAAAAAXRSTlMAQObYZgAAABdJREFUeNpjYEABjIwMRAFi1Y2aSKpKABFLABVQjyGWAAAAAElFTkSuQmCC";
    }, 450);
}

if ((navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i)) 
    && window.innerHeight != document.documentElement.clientHeight) 
{
    var fh = function() {
        document.documentElement.style.height = window.innerHeight + "px";
        if (document.body.scrollTop !== 0) window.scrollTo(0, 0);
    }.bind(this);
    window.addEventListener("scroll", fh, false);
    window.addEventListener("orientationchange", fh, false);
    fh();
    document.body.style.webkitTransform = "translate3d(0,0,0)";
    //document.body.style.position = "fixed";
}
</script>
 
</head>
<body onload="Init();">
<div id="map_canvas" class="noblur"></div>
<form onSubmit="codeAddress(); return false;" style="margin:0px; padding:0px;">
    <div id="map-layers" style="font-size:small;"> 
        <div id="scale" style="visibility:hidden;">
            <img id="hud_btnToggle" width="22" height="22" border=0 class="hud_btnW" /><br/>
            <img id="imgScale" width="30" height="427" border=0 />
        </div>
        <div id="searchbar"><input id="address" type="textbox" placeholder="Find Address..."></div>
        <div id="logo2">
            <img id="logo271" border=0 width="181" height="22"/><br/>
            <table id="sctbl" class="FuturaFont">
                <tr>
                    <td class="sctd"><a href="http://safecast.org" target="_blank"><span class="sclinks">Blog</span></a></td>
                    <td class="sctd"><a id="show" href="#"><span class="sclinks">About</span></a></td>
                    <td class="sctd"><a href="http://blog.safecast.org/donate/" target="_blank"><span class="sclinks">Donate</span></a></td>
                </tr>
            </table>
        </div>
        <div id="bottombar0">
            <select id="layers" onChange="return LayersHelper.UiLayers_OnChange();" class="FuturaFont">
                <option class="layer" value="11" id="layers_11">&nbsp;None</option>
                <option class="layer" value="0" id="layers_0">&nbsp;Safecast</option>
                <option class="layer" value="1" id="layers_1">&nbsp;&#9492; Points</option>
                <option class="layer" value="2" id="layers_2">&nbsp;&#9492; Interpolation</option>
                <option class="layer" value="12" id="layers_12">&nbsp;Safecast Snapshots...</option>
                <option class="layer" value="8" id="layers_8">&nbsp;Safecast 2013-04-15</option>
                <option class="layer" value="9" id="layers_9">&nbsp;Safecast 2014-03-11</option>
                <option class="layer" value="3" id="layers_3">&nbsp;NNSA Japan 2011-06-30</option>
                <option class="layer" value="4" id="layers_4">&nbsp;USGS/GSC NURE ~1980</option>
                <option class="layer" value="5" id="layers_5">&nbsp;Geoscience Australia 2010</option>
                <option class="layer" value="6" id="layers_6">&nbsp;AIST/JGS Natural Bkg</option>
                <option class="layer" value="10" id="layers_10">&nbsp;Add bGeigie Log...</option>
            </select>
        </div>
    </div> 
</form>


<div id="tsPanel" class="FuturaFont">
    <div id="tsPanelTitle">スナップショット</div>
    <div id="tsPanelContent">
        <div id="tsPanelContentTitle">SAFECAST SNAPSHOTS</div>
        <table id="tsPanelContentTable">
            <tr>
                <td class="tsInfoTd">
                    <span class="tsInfoLabel">開始日</span><br/> 
                    <span class="tsInfoSubLabel">START DATE</span>
                </td>
                <td class="tsInfoTd">
                    <span class="tsInfoLabel">終了日</span><br/>
                    <span class="tsInfoSubLabel">&nbsp;END DATE</span>
                </td>
            </tr>
            <tr>
                <td class="tsDateTd"><span id="tsStartDate">2011-03-11</span></td>
                <td class="tsDateTd"><span id="tsEndDate">2011-09-10</span></td>
            </tr>
            <tr>
                <td colspan="2" class="tsSliderTd">
                    <div id="tsSliderContainer">
                        <img id="tsTickImage" width="200" height="4">
                        <div id="tsSliderSubcontainer">
                            <input type="range" id="tsSlider" value="13" min="13" max="22" step="1" onChange="TimeSliceUI.tsSlider_OnChange();">
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>


<div id="popup" style="display:none;"></div>
<div id="hud_canvas"></div>
<div id="bv_transferBar" class="bv_transferBarHidden"></div>
<div id="whatsnew"></div>
<div id="warning_message"></div>
</body>
</html>











